<!-- {% load render_bundle from webpack_loader %} -->
<!DOCTYPE html>
<html lang="en">

<head>
  <title>semanticTraj</title>
  <meta charset="UTF-8">

  <link rel="stylesheet" type="text/css" href="assets/css/app.css">
  <link rel="stylesheet" type="text/css" href="assets/css/map.css">
  <link rel="stylesheet" type="text/css" href="assets/css/topic.css">
  <link rel="stylesheet" type="text/css" href="assets/css/hexa.css">
  <link rel="stylesheet" type="text/css" href="assets/css/list.css">
  <link rel="stylesheet" type="text/css" href="assets/css/searchbar.css">
        <link rel="stylesheet" type="text/css" href="assets/css/correlation_part.css">

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
   integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
   crossorigin=""></script>


  <script src="https://gw.alipayobjects.com/os/antv/pkg/_antv.g2-3.4.1/dist/g2.min.js"></script>
  <script src="https://gw.alipayobjects.com/os/antv/pkg/_antv.data-set-0.10.1/dist/data-set.min.js"></script>

</head>



<body>

<!--   <div id='leftcolumn'>
    <div class='search-container'>
      <div id='input-wrapper'>
        <input type="text" id='search-input-text'>
      </div>
    </div>
    <div class='tab-container'>
      <span id='search-button'>
        <svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
        </svg>
      </span>
    </div>
  </div>
 -->



  <div class="top-bar" id = 'mds-gsj'>
      <div class="logo">
        STVA
      </div>
      <div class='search-container'>

          <div id="input-wrapper">
            <input type="text" id="search-input-text">
          </div>
      </div>
      <button id="search-button">
         Query
      </button>
  </div>



  <div id = "Specification_view">
  </div>


  <div id="map-view" class="panel right-panel" >
        <div id="select-btn" style= "position: absolute;
    background: #6f6f6f;left: 13px;top: 83px; z-index: 2;cursor: pointer;">
          <img style="    height: 30px;" src="../assets/icons/others.svg">
        </div>
    <div id="map-container" style= "position: absolute;z-index: 1;"   class="panel right-panel" >
        <div class="default-word"><span> - </span></div>
    </div>
  </div>


  <div  id="topic-container" style = "
      position: absolute;"
      class="panel down-panel">
      <div class="down-contain"  style="width:700px">
          <!--<div class="panel three-left-panel" id="initial-correlation-container">-->
<div class="constraints">
                        <span style="width:100%;height:30%;font-size: large;color:#2f4b93;margin-bottom: 5px;">Temporal Constraints</span>
                        <div style="width:100%;height:70%;display:block">
                            <div style="background: #AFABAB;color:white;width:28%;display: inline-block;float:left;margin-left:25px;">周日上午</div>
                            <div style="width:20%;border:1px solid black;display: inline-block;">2018.01.10 9:00</div>
                            <span style="width:5%;color:darkblue;display: inline-block;margin-left:20px">~</span>
                            <div style="width:25%;border:1px solid black;display: inline-block;float:right;margin-right: 30px;">2018.01.10 11:00</div>
                        </div>

                    </div>
                    <div class="constraints-bar">
          <div class="panel three-left-panel" >
              <div class="left-panel" style="overflow-x:hidden;overflow-y:auto;" id="first-level-Tag">
                  <div class="constraint-title">Spatial Constraints Words</div>
                  <div id='school' class="show-hide">
                      <div class="zero-level-tag">
                          <div onclick="show_more('school_show_more','school_inf')" class="show-btn" value='+' id="school_show_more">+</div>
            <div class="zero-level-tag-name" id="zero-Tag">学校</div>
                      </div>
            <div id="school_inf" class='part-inf' style="display:none;">
                <div class="first-level-tag">
                    <span>0.86</span>
                   <div style="width:70%" id="F-Tag1">学校</div>
                </div>
                <div class="first-level-tag">
                    <span>0.60</span>
                    <div style="width:60%" id="F-Tag2">院校</div>
                </div>
                <div class="first-level-tag">
                    <span>0.5</span>
                   <div style="width:50%" id="F-Tag3">高校</div>
                </div>
                <div class="first-level-tag">
                    <span>0.45</span>
                    <div style="width:45%" id="F-Tag4">学堂</div>
                </div>
                <div class="first-level-tag">
                    <span>0.45</span>
                    <div style="width:45%" id="F-Tag5">书院</div>
                </div>
            </div>
        </div>
              <div id='hospital' class="show-hide">
                  <div class="zero-level-tag">
            <div onclick="show_more('hospital_show_more','hospital_inf')" class="show-btn" value='+' id="hospital_show_more">+</div>
            <div class="zero-level-tag-name" >医院</div>
            </div>
            <div id="hospital_inf" class='part-inf' style="display:none;">
                <div class="first-level-tag">
                    <span>0.86</span>
                   <div style="width:70%">学校</div>
                </div>
                <div class="first-level-tag">
                    <span>0.60</span>
                    <div style="width:60%">院校</div>
                </div>
                <div class="first-level-tag">
                    <span>0.5</span>
                   <div style="width:50%">高校</div>
                </div>
                <div class="first-level-tag">
                    <span>0.45</span>
                    <div style="width:45%">学堂</div>
                </div>
                <div class="first-level-tag">
                    <span>0.45</span>
                    <div style="width:45%">书院</div>
                </div>
            </div>
        </div>
              </div>
              <div class="right-panel" style="text-align: center;overflow-y:auto;" id="second-level-Tag">
                  <div class="constraint-title">Location List</div>
                      <div class="second-level-tag" id="S-Tag1">
                          小学
                      </div>
                      <div class="second-level-tag" id="S-Tag2">
                          学校
                      </div>
                      <div class="second-level-tag" id="S-Tag3">中学</div>
                      <div class="second-level-tag" id="S-Tag4">大学</div>
                      <div class="second-level-tag" id="S-Tag5">大学</div>
                  <div class="second-level-tag" id="S-Tag6">大学</div>
                  <div class="second-level-tag" id="S-Tag7">大学</div>
                  <div class="second-level-tag" id="S-Tag8">大学</div>
                  <div class="second-level-tag" id="S-Tag9">大学</div>
                  <div class="second-level-tag" id="S-Tag10">大学</div>
                  <div class="second-level-tag" id="S-Tag11">大学</div>
                  <div class="second-level-tag" id="S-Tag12">大学</div>
          </div>
          </div>
          <div class="panel three-right-panel" style="padding-top: 5px;">
              <div class="constraint-title">Semantic Parameters</div>
              <div id="entertainment-part" class="semantic_part">
				<div class="semantic_name" id="entertainment-part-name">娱乐区</div>
			<div class="semantic_progress">
　				<div class="progress" id="entertainment-part-progress">
 					<div class="progress_bg" id="entertainment-part-progress_bg">
						<div class="progress_bar" id="entertainment-part-progress_bar"></div>
 					</div>
 					<div class="progress_btn" id="entertainment-part-progress_btn"></div>
				</div>
			</div>
                  <div class="progress_length" id="entertainment-part-progress_text">0</div>
			</div>
			<div id="business-part" class="semantic_part">
				<div class="semantic_name" id="business-part-name">商业区</div>
			<div class="semantic_progress">
　				<div class="progress" id="business-part-progress">
 					<div class="progress_bg" id="business-part-progress_bg">
						<div class="progress_bar" id="business-part-progress_bar"></div>
 					</div>
 					<div class="progress_btn" id="business-part-progress_btn"></div>
				</div>

			</div>
                <div class="progress_length" id="business-part-progress_text">0</div>
			</div>
			<div id="living-part" class="semantic_part">
				<div class="semantic_name" id="living-part-name">住宅区</div>
			<div class="semantic_progress">
　				<div class="progress" id="living-part-progress">
 					<div class="progress_bg" id="living-part-progress_bg">
						<div class="progress_bar" id="living-part-progress_bar"></div>
 					</div>
 					<div class="progress_btn" id="living-part-progress_btn"></div>
				</div>

			</div>
                <div class="progress_length" id="living-part-progress_text">0</div>
			</div>
			<div id="education-part" class="semantic_part">
				<div class="semantic_name" id="education-part-name">教育区</div>
			<div class="semantic_progress" >
　				<div class="progress" id="education-part-progress">
 					<div class="progress_bg" id="education-part-progress_bg">
						<div class="progress_bar" id="education-part-progress_bar"></div>
 					</div>
 					<div class="progress_btn" id="education-part-progress_btn"></div>
				</div>

			</div>
                <div class="progress_length" id="education-part-progress_text">0</div>
			</div>
			<div id="industry-part" class="semantic_part">
				<div class="semantic_name" id="industry-part-name">工业区</div>
			<div class="semantic_progress">
　				<div class="progress" id="industry-part-progress">
 					<div class="progress_bg" id="industry-part-progress_bg">
						<div class="progress_bar" id="industry-part-progress_bar"></div>
 					</div>
 					<div class="progress_btn" id="industry-part-progress_btn"></div>
				</div>
			</div>
                <div class="progress_length" id="industry-part-progress_text">0</div>
			</div>
			<div id="traffic-part" class="semantic_part">
                <div class="semantic_name" id="traffic-part-name">交通区</div>
                <div class="semantic_progress">
　				<div class="progress" id="traffic-part-progress">
 					<div class="progress_bg" id="traffic-part-progress_bg">
						<div class="progress_bar" id="traffic-part-progress_bar"></div>
 					</div>
 					<div class="progress_btn" id="traffic-part-progress_btn"></div>
				</div>
                </div>
                <div class="progress_length" id="traffic-part-progress_text">0</div>
			</div>
          </div>
                        </div>

      </div>
      <div class="default-word"><span> - </span></div>
      <div class="panel up-panel" id="topic-legend">
            <div class="legend-intro">
                Function Categories :
            </div>
      </div>
  </div>

<!-- 		<div class="sub-contain down-contain">
			<div class="panel left-panel"  id="control">
        <div class="left-small-panel">
            <div class="control-box">
              <span class="type-name">Opacity</span>    
              <input id='range1'  type="range" name="进度条" min="0.01" max="1" step="0.01" value="0.2">
              <span id="valBox1" class="type-value" > 0.2 </span> 

              <button id="range8"> Select</button> 
            </div>
                         

            <div class="control-box">
              <span class="type-name">Threshold | min </span>    
              <input id='range3'  type="range" name="进度条" min="0.001" max="20" step="0.00001" value="1">
              <span id="valBox3" class="type-value"> 1 </span>  
            </div>

            <div class="control-box">
              <span class="type-name">Links Force</span>    
              <input id='range5'  type="range" name="进度条" min="1" max="10" step="1" value="5">
              <span id="valBox5"class="type-value"> 5</span>  
            </div>
            <div class="control-box">
              <span class="type-name">Charge Force</span>    
              <input id='range7'  type="range" name="进度条" min="-500" max="500" step="10" value="-150">
              <span id="valBox7" class="type-value"> -180</span>  
            </div>

            <div class="control-box">
              <span class="type-name">Topic Num</span>    
              <input id='range6'  type="number" name="进度条"  value="1">
            </div>
        </div>
        <div class="right-small-panel">

            <div class="control-box">
              <span class="type-name">分布</span>    
              <div id="tuli"></div>
            </div>
        </div>
			</div>
			<div class="panel right-panel" id='hexagon-container'>
          <div class="default-word">
            <span> · </span>
          </div> 
       </div> 
      </div>	
		</div> -->

	</div>


  <div id = "list-contain" class="panel">
          <!-- <div class="default-word"><span> - </span></div>  -->
      <div class="btn-container" >
        <div style="text-align: center; margin: 5px;">Result List</div>
      <!--   
        <ul class="nav navbar-nav" style="margin: 6px 0;">
              <input type="checkbox" checked  id="norm-input">
        </ul> -->
        <button id="filter-btn" filtered>filter</button>
      </div>
      <div id="resultlist"/>
  </div>

  <!-- {% render_bundle 'main' %} -->
  <script src="bundle.js"></script>
<script src="https://cdn.bootcss.com/jsPlumb/2.6.8/js/jsplumb.min.js"></script>
</body>
<script>
    function show_more(id,show_id){
        var this_button=document.getElementById(id);
        var value=this_button.innerText;
        //var value1=$("school_show_more").val();
        console.log(value);

        if(value=='+')
        {
            this_button.innerText='-';
            //create_line(paris);
        }
        else
        {
        this_button.innerText='+';
        var wrong_connections = ['F-Tag1'];


        jsPlumb.deleteConnectionsForElement("F-Tag1",{});

        }
        $("#"+show_id).slideToggle();
        if(value=='+')
        {
            create_line(paris);
        }


        };
var paris=[['F-Tag1','S-Tag5'],['F-Tag2','S-Tag5'],['F-Tag3','S-Tag5'],['F-Tag4','S-Tag5'],['F-Tag1','S-Tag2']];
    function create_line(source,targets) {
        var common = {
        endpoint: ['Dot',{ radius:5}],//'Blank',//'Rectangle','Image',//
        connector: ['StateMachine'],//Bezier,Straight,Flowchart'],
        anchor: ['Left', 'Right'],
        paintStyle: { stroke: 'lightgray', strokeWidth: 3 },
        maxConnections: -1,
        endpointStyle: { fill: 'lightgray', outlineStroke: 'darkgray', outlineWidth: 2 },
            ConnectionsDetachable: false, //连线是否可用鼠标分离
      };
jsPlumb.ready(function () {

          jsPlumb.connect({
        source: 'F-Tag1',//source,//'item_left',
        target: 'S-Tag5',//targets[i],//'item_right',
      },common)
    //jsPlumb.draggable('F-Tag1')
    //jsPlumb.draggable('S-Tag5')

    })
    }

    function DrawALLbar(){
        locations={'entertainment':{'tag':false,'ox':0,'left':0,'bgleft':0,'progress_width':0},'business':{'tag':false,'ox':0,'left':0,'bgleft':0,'progress_width':0},
        'living':{'tag':false,'ox':0,'left':0,'bgleft':0,'progress_width':0},'education':{'tag':false,'ox':0,'left':0,'bgleft':0,'progress_width':0},
        'industry':{'tag':false,'ox':0,'left':0,'bgleft':0,'progress_width':0},'traffic':{'tag':false,'ox':0,'left':0,'bgleft':0,'progress_width':0}};//var tag = false,ox = 0,left = 0,bgleft = 0;
	var parts=['entertainment','business','living','education','industry','traffic'];

    			for(var i=0;i<parts.length;i++){
    				var progress_btn="#"+parts[i]+'-part-progress_btn';
    				var progress="#"+parts[i]+'-part-progress';
    				var progress_bg="#"+parts[i]+'-part-progress_bg';
    				var progress_bar="#"+parts[i]+'-part-progress_bar';
    				var text="#"+parts[i]+'-part-progress_text';
    				//var tag = false,ox = 0,left = 0,bgleft = 0;
                    draw_bar(progress_btn,progress,progress_bg,progress_bar,text);
				}
   		};
	function draw_bar(progress_btn,progress,progress_bg,progress_bar,text){
	    var part_name=progress.replace('#','').replace('-part-progress','');
	    locations[part_name].progress_width=$(progress).width();
	    $(progress_btn).mousedown(function(e) {
    			    var part_name=progress_btn.replace('#','').replace('-part-progress_btn','');
    				locations[part_name].ox = e.pageX - locations[part_name].left;
     			locations[part_name].tag = true;
   			});
    			$(progress_btn).mouseup(function() {
    			    var part_name=progress_btn.replace('#','').replace('-part-progress_btn','');
     			locations[part_name].tag = false;
    			});
    			//var progress_width = $(progress).width();要改成全局变量
    			$(progress).mousemove(function(e) {//鼠标移动
    			   var part_name=progress.replace('#','').replace('-part-progress','');
     			if ((locations[part_name].tag)) {
      				locations[part_name].left = e.pageX - locations[part_name].ox;
      				if (locations[part_name].left <= 0) {
       					locations[part_name].left = 0;
      				}else if (locations[part_name].left > locations[part_name].progress_width) {
       					locations[part_name].left = locations[part_name].progress_width;
      				}
      				$(progress_btn).css('left', locations[part_name].left);
      				$(progress_bar).width(locations[part_name].left);
     				$(text).html((locations[part_name].left/(locations[part_name].progress_width)).toFixed(2));
     			}
    			});
    			$(progress_bg).click(function(e) {//鼠标点击
    				var part_name=progress_bg.replace('#','').replace('-part-progress_bg','');
     			if (!(locations[part_name].tag)) {
      				locations[part_name].bgleft = $(progress_bg).offset().left;
      				locations[part_name].left = e.pageX - locations[part_name].bgleft;
      				if (locations[part_name].left <= 0) {
       					locations[part_name].left = 0;
      				}else if (locations[part_name].left > (locations[part_name].progress_width)) {
       					locations[part_name].left = locations[part_name].progress_width;
      				}
      				$(progress_btn).css('left', locations[part_name].left);
      				$(progress_bar).width(locations[part_name].left);
      				//$('.progress_bar').animate({width:left},locations[part_name].progress_width);
      				$(text).html((locations[part_name].left/(locations[part_name].progress_width)).toFixed(2));
     			}
    			});
    }
	DrawALLbar();
</script>

</html>